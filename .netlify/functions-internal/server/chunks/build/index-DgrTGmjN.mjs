import{defineComponent as e,computed as t,h as o,onServerPrefetch as n}from"vue";import{Icon as r,getIcon as s,loadIcon as i}from"@iconify/vue";import{getIconCSS as u}from"@iconify/utils/lib/css/icon";import{f as l,e as a,g as c,u as m}from"./server.mjs";import{u as p}from"./asyncData-DWeUa_vf.mjs";import"../_/nitro.mjs";import"@tidbcloud/serverless";import"node:crypto";import"node:http";import"node:https";import"node:events";import"node:buffer";import"@iconify/utils";import"consola";import"node:fs";import"node:path";import"pinia";import"vue-router";import"tailwindcss/colors";import"vue/server-renderer";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"devalue";import"unhead/utils";async function loadIcon(e,t){if(!e)return null;const o=s(e);if(o)return o;let n;const r=i(e).catch(()=>(console.warn(`[Icon] failed to load icon \`${e}\``),null));return t>0?await Promise.race([r,new Promise(o=>{n=setTimeout(()=>{console.warn(`[Icon] loading icon \`${e}\` timed out after ${t}ms`),o()},t)})]).finally(()=>clearTimeout(n)):await r,s(e)}function useResolvedName(e){const o=a().icon,n=(o.collections||[]).sort((e,t)=>t.length-e.length);return t(()=>{const t=e(),r=t.startsWith(o.cssSelectorPrefix)?t.slice(o.cssSelectorPrefix.length):t,s=o.aliases?.[r]||r;if(!s.includes(":")){const e=n.find(e=>s.startsWith(e+"-"));return e?e+":"+s.slice(e.length+1):s}return s})}function resolveCustomizeFn(e,t){if(!1!==e)return!0===e||null===e?t:e}const d="NUXT_ICONS_SERVER_CSS";const f=e({name:"NuxtIconCss",props:{name:{type:String,required:!0},customize:{type:[Function,Boolean,null],default:null,required:!1}},setup(e){const r=l(),s=a().icon,i=t(()=>e.name?s.cssSelectorPrefix+e.name:""),p=t(()=>"."+function(e){return e.replace(/([^\w-])/g,"\\$1")}(i.value));return n(async()=>{{const t=c().icon||{};if(!t?.serverKnownCssClasses?.includes(i.value)){const t=await loadIcon(e.name,s.fetchTimeout).catch(()=>null);if(!t)return null;let o=r.vueApp._context.provides[d];if(o||(o=r.vueApp._context.provides[d]=new Map,r.runWithContext(()=>{m({style:[()=>{let e=Array.from(o.values()).sort().join("");return s.cssLayer&&(e=`@layer ${s.cssLayer} {${e}}`),{innerHTML:e}}]},{tagPriority:"low"})})),e.name&&!o.has(e.name)){const n=function(t,o=!0){let n=p.value;s.cssWherePseudo&&(n=`:where(${n})`);const r=u(t,{iconSelector:n,format:"compressed",customise:resolveCustomizeFn(e.customize,s.customize)});return s.cssLayer&&o?`@layer ${s.cssLayer} { ${r} }`:r}(t,!1);o.set(e.name,n)}return null}}}),()=>o("span",{class:["iconify",i.value]})}}),v=e({name:"NuxtIconSvg",props:{name:{type:String,required:!0},customize:{type:[Function,Boolean,null],default:null,required:!1}},setup(e,{slots:t}){l();const s=a().icon,i=useResolvedName(()=>e.name),u="i-"+i.value;return i.value&&n(async()=>{await p(u,async()=>await loadIcon(i.value,s.fetchTimeout),{deep:!1})}),()=>o(r,{icon:i.value,ssr:!0,customise:resolveCustomizeFn(e.customize,s.customize)},t)}}),y=e({name:"NuxtIcon",props:{name:{type:String,required:!0},mode:{type:String,required:!1,default:null},size:{type:[Number,String],required:!1,default:null},customize:{type:[Function,Boolean,null],default:null,required:!1}},setup(e,{slots:n}){const r=l(),s=a().icon,i=useResolvedName(()=>e.name),u=t(()=>r.vueApp?.component(i.value)||("svg"===(e.mode||s.mode)?v:f)),c=t(()=>{const t=e.size||s.size;return t?{fontSize:Number.isNaN(+t)?t:t+"px"}:null});return()=>o(u.value,{...s.attrs,name:i.value,class:s.class,style:c.value,customize:e.customize},n)}});export{y as default};
//# sourceMappingURL=index-DgrTGmjN.mjs.map
