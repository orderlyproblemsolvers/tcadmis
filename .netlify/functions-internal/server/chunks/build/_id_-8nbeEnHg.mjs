import{_ as a}from"./nuxt-link-Bg1T6Ek3.mjs";import{defineComponent as e,withAsyncContext as t,ref as r,watch as s,mergeProps as d,withCtx as c,createTextVNode as o,unref as i,useSSRContext as l}from"vue";import{ssrRenderAttrs as n,ssrRenderComponent as m,ssrInterpolate as p,ssrRenderClass as v,ssrIncludeBooleanAttr as u,ssrLooseContain as x,ssrLooseEqual as b,ssrRenderStyle as y,ssrRenderList as g,ssrRenderAttr as f}from"vue/server-renderer";import{_ as h,c as w}from"./server.mjs";import{u as _}from"./fetch-Cnghzd6E.mjs";import"../_/nitro.mjs";import"@tidbcloud/serverless";import"node:crypto";import"node:http";import"node:https";import"node:events";import"node:buffer";import"@iconify/utils";import"consola";import"node:fs";import"node:path";import"pinia";import"vue-router";import"tailwindcss/colors";import"@iconify/vue";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"devalue";import"unhead/utils";import"@vue/shared";import"./asyncData-DWeUa_vf.mjs";const k=e({__name:"[id]",__ssrInlineRender:!0,async setup(e){let l,h;const k=w().params.id,{data:$}=([l,h]=t(()=>_(`/api/teacher/student-details?id=${k}`,"$b0ZptFfCKo")),l=await l,h(),l),A=r("academic"),S=r(!1),C=r(!1),T=r(""),E=r(!1),j=r(!1),P=["Maths PACES","English PACES","Science PACES","Soc. Stud PACES","Literature PACES","World Building","Nigerian Maths","English Language","BST- Basic Sci & Tech","BST- PHE","BST-Comp Science","NV-Soc. Studies","NV- Civic/Sec. Edu.","C.R.K","PVS- Agric. Science","PVS- Home Economics","French","Vocational Apt.","Verbal Reasoning","Quantitative Apt.","History","Bible memory"],generateBlankAcademics=()=>P.map(a=>({subject:a,ca1:"",ca2:"",assignment:"",class_ex:"",affective:"",psychomotor:"",exam:""})),B=r({session:"2025/2026",term:"1st Term",class_level:"",academics:generateBlankAcademics(),summary:{total_paces:"",pace_average:"",reading_comprehension:"",days_absent:0,next_term_begins:""},comments:{teacher:"",principal:""}}),fetchExistingResults=async()=>{C.value=!0,T.value="";try{const a=await $fetch("/api/teacher/results",{method:"GET",params:{student_id:k,session:B.value.session,term:B.value.term}});if(a.found&&a.academics.length>0){const e=new Map(a.academics.map(a=>[a.subject,a]));B.value.academics=P.map(a=>{if(e.has(a)){const t=e.get(a);return{subject:a,ca1:t.ca1,ca2:t.ca2,assignment:t.assignment,class_ex:t.class_ex,affective:t.affective,psychomotor:t.psychomotor,exam:t.exam}}return{subject:a,ca1:"",ca2:"",assignment:"",class_ex:"",affective:"",psychomotor:"",exam:""}}),B.value.summary={total_paces:a.summary?.total_paces||"",pace_average:a.summary?.pace_average||"",reading_comprehension:a.summary?.reading_comprehension||"",days_absent:a.summary?.days_absent||0,next_term_begins:a.summary?.next_term_begins?new Date(a.summary.next_term_begins).toISOString().split("T")[0]:""},B.value.comments=a.comments}else resetForm(!1)}catch(a){console.error("Fetch error:",a),j.value=!0,T.value="Error loading existing records."}finally{C.value=!1}};s(()=>[B.value.session,B.value.term],()=>{fetchExistingResults()},{immediate:!0});const resetForm=(a=!0)=>{B.value.academics=generateBlankAcademics(),B.value.summary={total_paces:"",pace_average:"",reading_comprehension:"",days_absent:0,next_term_begins:""},B.value.comments={teacher:"",principal:""},a&&fetchExistingResults()},calculateTotal=a=>{if(["ca1","ca2","assignment","class_ex","affective","psychomotor","exam"].every(e=>""===a[e]||null===a[e]||void 0===a[e]))return"";const val=a=>""===a||null===a?0:Number(a);return val(a.ca1)+val(a.ca2)+val(a.assignment)+val(a.class_ex)+val(a.affective)+val(a.psychomotor)+val(a.exam)};return(e,t,r,s)=>{const l=a;t(`<div${n(d({class:"min-h-screen bg-gray-50 p-6 pb-24"},s))} data-v-0a42230c><div class="max-w-7xl mx-auto" data-v-0a42230c><div class="bg-white p-6 rounded-lg shadow-sm mb-6 flex flex-col md:flex-row md:items-center justify-between gap-4" data-v-0a42230c><div data-v-0a42230c>`),t(m(l,{to:"/teacher/dashboard",class:"text-sm text-gray-500 hover:text-primary-dark transition-colors"},{default:c((a,e,t,r)=>{if(!e)return[o(" ← Back to Dashboard ")];e(" ← Back to Dashboard ")}),_:1},r)),t('<div class="mt-2" data-v-0a42230c><h1 class="text-2xl font-bold text-primary-dark" data-v-0a42230c>Result Entry</h1>'),i($)?t(`<p class="text-gray-600" data-v-0a42230c> Student: <span class="font-bold text-black" data-v-0a42230c>${p(i($).first_name)} ${p(i($).last_name)}</span><span class="bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded ml-2" data-v-0a42230c>${p(i($).admission_number)}</span></p>`):t('<p class="text-gray-400 text-sm" data-v-0a42230c>Loading student details...</p>'),t(`</div></div><div class="flex gap-4" data-v-0a42230c><div data-v-0a42230c><label class="block text-xs font-semibold text-gray-500 uppercase mb-1" data-v-0a42230c>Academic Session</label><select class="border border-gray-300 p-2 rounded focus:ring-primary-dark focus:border-primary-dark text-sm font-medium w-40" data-v-0a42230c><option data-v-0a42230c${u(Array.isArray(i(B).session)?x(i(B).session,null):b(i(B).session,null))?" selected":""}>2025/2026</option><option data-v-0a42230c${u(Array.isArray(i(B).session)?x(i(B).session,null):b(i(B).session,null))?" selected":""}>2026/2027</option></select></div><div data-v-0a42230c><label class="block text-xs font-semibold text-gray-500 uppercase mb-1" data-v-0a42230c>Term</label><select class="border border-gray-300 p-2 rounded focus:ring-primary-dark focus:border-primary-dark text-sm font-medium w-40" data-v-0a42230c><option data-v-0a42230c${u(Array.isArray(i(B).term)?x(i(B).term,null):b(i(B).term,null))?" selected":""}>1st Term</option><option data-v-0a42230c${u(Array.isArray(i(B).term)?x(i(B).term,null):b(i(B).term,null))?" selected":""}>2nd Term</option><option data-v-0a42230c${u(Array.isArray(i(B).term)?x(i(B).term,null):b(i(B).term,null))?" selected":""}>3rd Term</option></select></div></div></div><div class="flex border-b border-gray-300 mb-6 bg-transparent" data-v-0a42230c><button class="${v(["px-6 py-3 font-medium text-sm transition-all","academic"===i(A)?"border-b-2 border-primary-dark text-primary-dark bg-white rounded-t":"text-gray-500 hover:text-gray-700"])}" data-v-0a42230c> 1. Academic Scores </button><button class="${v(["px-6 py-3 font-medium text-sm transition-all","remarks"===i(A)?"border-b-2 border-primary-dark text-primary-dark bg-white rounded-t":"text-gray-500 hover:text-gray-700"])}" data-v-0a42230c> 2. Report Data &amp; Remarks </button></div>`),i(C)?t('<div class="py-12 text-center text-gray-500 bg-white rounded shadow" data-v-0a42230c><div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-dark mb-2" data-v-0a42230c></div><p data-v-0a42230c>Fetching existing records...</p></div>'):(t(`<div data-v-0a42230c><div class="bg-white rounded shadow overflow-hidden" style="${y("academic"===i(A)?null:{display:"none"})}" data-v-0a42230c><div class="overflow-x-auto" data-v-0a42230c><table class="min-w-full divide-y divide-gray-200" data-v-0a42230c><thead class="bg-gray-50" data-v-0a42230c><tr data-v-0a42230c><th class="px-4 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider w-64" data-v-0a42230c>Subject</th><th class="px-2 py-3 text-center text-xs font-medium text-gray-500 uppercase w-20" data-v-0a42230c>1st CA<br data-v-0a42230c><span class="text-[10px]" data-v-0a42230c>(10)</span></th><th class="px-2 py-3 text-center text-xs font-medium text-gray-500 uppercase w-20" data-v-0a42230c>2nd CA<br data-v-0a42230c><span class="text-[10px]" data-v-0a42230c>(10)</span></th><th class="px-2 py-3 text-center text-xs font-medium text-gray-500 uppercase w-20" data-v-0a42230c>Assign<br data-v-0a42230c><span class="text-[10px]" data-v-0a42230c>(10)</span></th><th class="px-2 py-3 text-center text-xs font-medium text-gray-500 uppercase w-20" data-v-0a42230c>Class Ex<br data-v-0a42230c><span class="text-[10px]" data-v-0a42230c>(10)</span></th><th class="px-2 py-3 text-center text-xs font-medium text-gray-500 uppercase w-20" data-v-0a42230c>Affective<br data-v-0a42230c><span class="text-[10px]" data-v-0a42230c>(10)</span></th><th class="px-2 py-3 text-center text-xs font-medium text-gray-500 uppercase w-20" data-v-0a42230c>Psych<br data-v-0a42230c><span class="text-[10px]" data-v-0a42230c>(10)</span></th><th class="px-2 py-3 text-center text-xs font-bold text-blue-800 uppercase bg-blue-50 w-24" data-v-0a42230c>Exam<br data-v-0a42230c><span class="text-[10px]" data-v-0a42230c>(40)</span></th><th class="px-4 py-3 text-center text-xs font-bold text-gray-800 uppercase w-24" data-v-0a42230c>Total<br data-v-0a42230c><span class="text-[10px]" data-v-0a42230c>(100)</span></th></tr></thead><tbody class="bg-white divide-y divide-gray-200" data-v-0a42230c>\x3c!--[--\x3e`),g(i(B).academics,(a,e)=>{var r;t(`<tr class="${v(e%2==0?"bg-white":"bg-gray-50")}" data-v-0a42230c><td class="px-4 py-2 text-sm font-bold text-gray-700" data-v-0a42230c>${p(a.subject)}</td>\x3c!--[--\x3e`),g(["ca1","ca2","assignment","class_ex","affective","psychomotor"],e=>{t(`<td class="px-2 py-2" data-v-0a42230c><input${f("value",a[e])} type="number" min="0" max="10" placeholder="-" class="w-full border-gray-300 rounded text-center text-sm focus:ring-primary-dark focus:border-primary-dark placeholder-gray-300" data-v-0a42230c></td>`)}),t(`\x3c!--]--\x3e<td class="px-2 py-2 bg-blue-50" data-v-0a42230c><input${f("value",a.exam)} type="number" min="0" max="40" placeholder="-" class="w-full border-blue-300 rounded text-center text-sm font-bold text-blue-900 focus:ring-blue-500 focus:border-blue-500 placeholder-blue-300" data-v-0a42230c></td><td class="px-4 py-2 text-center font-bold text-gray-900" data-v-0a42230c><span class="${v((r=calculateTotal(a),""===r?"text-gray-400":r<40?"text-red-600":"text-green-700"))}" data-v-0a42230c>${p(calculateTotal(a))}</span></td></tr>`)}),t(`\x3c!--]--\x3e</tbody></table></div></div><div class="bg-white rounded shadow p-8" style="${y("remarks"===i(A)?null:{display:"none"})}" data-v-0a42230c><div class="mb-10" data-v-0a42230c><h3 class="font-bold text-lg text-gray-800 mb-6 border-b pb-2" data-v-0a42230c>Attendance &amp; Performance Metrics</h3><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" data-v-0a42230c><div data-v-0a42230c><label class="block text-sm font-medium text-gray-700 mb-1" data-v-0a42230c>Total Paces Completed</label><input${f("value",i(B).summary.total_paces)} type="text" placeholder="e.g. 15" class="w-full border-gray-300 rounded p-2 focus:ring-primary-dark focus:border-primary-dark" data-v-0a42230c></div><div data-v-0a42230c><label class="block text-sm font-medium text-gray-700 mb-1" data-v-0a42230c>Date &amp; Pace Average</label><input${f("value",i(B).summary.pace_average)} type="text" placeholder="e.g. 12/10/25 - 4.5" class="w-full border-gray-300 rounded p-2 focus:ring-primary-dark focus:border-primary-dark" data-v-0a42230c></div><div data-v-0a42230c><label class="block text-sm font-medium text-gray-700 mb-1" data-v-0a42230c>Reading Comprehension (WPM)</label><input${f("value",i(B).summary.reading_comprehension)} type="text" placeholder="e.g. 120 wpm" class="w-full border-gray-300 rounded p-2 focus:ring-primary-dark focus:border-primary-dark" data-v-0a42230c></div><div data-v-0a42230c><label class="block text-sm font-medium text-gray-700 mb-1" data-v-0a42230c>Days Absent</label><input${f("value",i(B).summary.days_absent)} type="number" min="0" class="w-full border-gray-300 rounded p-2 focus:ring-primary-dark focus:border-primary-dark" data-v-0a42230c></div><div data-v-0a42230c><label class="block text-sm font-medium text-gray-700 mb-1" data-v-0a42230c>Next Term Begins</label><input${f("value",i(B).summary.next_term_begins)} type="date" class="w-full border-gray-300 rounded p-2 focus:ring-primary-dark focus:border-primary-dark" data-v-0a42230c></div></div></div><div class="space-y-8" data-v-0a42230c><h3 class="font-bold text-lg text-gray-800 mb-6 border-b pb-2" data-v-0a42230c>Term Remarks</h3><div data-v-0a42230c><label class="block text-sm font-medium text-gray-700 mb-2" data-v-0a42230c>Class Teacher&#39;s Comment</label><textarea rows="4" class="w-full border-gray-300 rounded shadow-sm focus:ring-primary-dark focus:border-primary-dark p-3 text-sm" data-v-0a42230c>${p(i(B).comments.teacher)}</textarea></div><div data-v-0a42230c><label class="block text-sm font-medium text-gray-700 mb-2" data-v-0a42230c>Head Teacher&#39;s Comment</label><textarea rows="4" class="w-full border-gray-300 rounded shadow-sm focus:ring-primary-dark focus:border-primary-dark p-3 text-sm" data-v-0a42230c>${p(i(B).comments.principal)}</textarea></div></div></div></div>`)),t('<div class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-4 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)] z-20" data-v-0a42230c><div class="max-w-7xl mx-auto flex justify-between items-center" data-v-0a42230c><div class="flex items-center" data-v-0a42230c>'),i(E)?t(`<div class="flex items-center text-green-700 bg-green-50 px-3 py-1 rounded border border-green-200 transition-all" data-v-0a42230c><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-0a42230c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" data-v-0a42230c></path></svg> ${p(i(T))}</div>`):t("\x3c!----\x3e"),i(j)?t(`<div class="text-red-600 bg-red-50 px-3 py-1 rounded border border-red-200" data-v-0a42230c>${p(i(T))}</div>`):t("\x3c!----\x3e"),t(`</div><div class="flex gap-4" data-v-0a42230c><button class="px-4 py-2 text-gray-600 hover:text-gray-800 text-sm font-medium" data-v-0a42230c>Reset</button><button${u(i(S)||i(C))?" disabled":""} class="bg-primary-dark text-white px-8 py-3 rounded shadow hover:bg-opacity-90 disabled:opacity-50 disabled:cursor-not-allowed font-medium transition-all flex items-center" data-v-0a42230c>`),i(S)?t('<svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" fill="none" viewBox="0 0 24 24" data-v-0a42230c><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-0a42230c></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" data-v-0a42230c></path></svg>'):t("\x3c!----\x3e"),t(` ${p(i(S)?"Saving...":"Save All Changes")}</button></div></div></div></div></div>`)}}}),$=k.setup;k.setup=(a,e)=>{const t=l();return(t.modules||(t.modules=new Set)).add("pages/teacher/results/[id].vue"),$?$(a,e):void 0};const A=h(k,[["__scopeId","data-v-0a42230c"]]);export{A as default};
//# sourceMappingURL=_id_-8nbeEnHg.mjs.map
