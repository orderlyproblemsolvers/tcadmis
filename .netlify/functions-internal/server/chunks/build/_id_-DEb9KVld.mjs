import{_ as e}from"./nuxt-link-Bg1T6Ek3.mjs";import{_ as t}from"./Icon-nvTqRNH0.mjs";import{defineComponent as s,ref as r,withAsyncContext as a,computed as o,resolveComponent as l,mergeProps as n,withCtx as d,createTextVNode as i,unref as c,toDisplayString as p,createVNode as m,useSSRContext as x}from"vue";import{ssrRenderAttrs as u,ssrRenderComponent as b,ssrInterpolate as g,ssrRenderAttr as v,ssrIncludeBooleanAttr as f,ssrLooseContain as h,ssrLooseEqual as y,ssrRenderList as w}from"vue/server-renderer";import{c as $,b as _}from"./server.mjs";import{u as j}from"./useToast-CQ7Y19Cm.mjs";import{u as B}from"./fetch-Cnghzd6E.mjs";import"../_/nitro.mjs";import"@tidbcloud/serverless";import"node:crypto";import"node:http";import"node:https";import"node:events";import"node:buffer";import"@iconify/utils";import"consola";import"node:fs";import"node:path";import"./index-DgrTGmjN.mjs";import"@iconify/vue";import"@iconify/utils/lib/css/icon";import"./asyncData-DWeUa_vf.mjs";import"reka-ui";import"@vueuse/core";import"pinia";import"vue-router";import"tailwindcss/colors";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"devalue";import"unhead/utils";import"@vue/shared";const G=s({__name:"[id]",__ssrInlineRender:!0,async setup(s){let x,G;const k=$();_();const A=k.params.id;j();const D=r(!1),R=r(""),N=["Playgroup","Nursery 1","Nursery 2","Reading Readiness","Grade 1","Grade 2","Grade 3","Grade 4","Grade 5","Grade 6","Graduated"],{data:C,pending:S,refresh:P,error:T}=([x,G]=a(()=>B("/api/admin/student-details",{params:{id:A}},"$aAgy0YrfmJ")),x=await x,G(),x),M=o(()=>C.value?.student),E=o(()=>C.value?.history||[]);return console.log(E),console.log(M),(s,r,a,o)=>{const x=l("UNotifications"),$=e,_=t;r(`<div${u(n({class:"p-4 sm:p-8 max-w-6xl mx-auto"},o))}>`),r(b(x,null,null,a)),r('<div class="mb-8"><div class="flex items-center gap-2 text-sm text-gray-500 mb-4">'),r(b($,{to:"/admin/dashboard",class:"hover:text-[#09033B]"},{default:d((e,t,s,r)=>{if(!t)return[i("Dashboard")];t("Dashboard")}),_:1},a)),r("<span>/</span>"),c(M)?r(b($,{to:`/admin/classes/${c(M).class_level}`,class:"hover:text-[#09033B]"},{default:d((e,t,s,r)=>{if(!t)return[i(p(c(M).class_level),1)];t(`${g(c(M).class_level)}`)}),_:1},a)):r("<span>...</span>"),r('<span>/</span><span class="text-gray-900 font-medium">Profile</span></div><div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4"><h1 class="text-3xl font-bold text-[#09033B]">Student Profile</h1></div></div>'),c(S)?r('<div class="text-center py-12"><div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-[#09033B]"></div><p class="mt-2 text-gray-500">Loading student profile...</p></div>'):c(T)?r(`<div class="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded relative" role="alert"><strong class="font-bold">Error loading profile: </strong><span class="block sm:inline">${g(c(T).message)}</span></div>`):c(M)?(r('<div class="grid grid-cols-1 lg:grid-cols-3 gap-8"><div class="lg:col-span-1 space-y-6"><div class="bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"><div class="bg-[#09033B] h-24 relative"><div class="absolute -bottom-10 left-1/2 transform -translate-x-1/2"><div class="w-24 h-24 bg-white rounded-full p-1 shadow-lg overflow-hidden group">'),c(M).photo_url?r(`<img${v("src",c(M).photo_url)} class="w-full h-full object-cover rounded-full" alt="Student Photo">`):r(`<div class="w-full h-full bg-gray-100 rounded-full flex items-center justify-center text-3xl font-bold text-[#09033B]">${g(c(M).first_name.charAt(0))}${g(c(M).last_name.charAt(0))}</div>`),r(`</div></div></div><div class="pt-12 pb-6 px-6 text-center"><h2 class="text-xl font-bold text-gray-900">${g(c(M).last_name)}, ${g(c(M).first_name)}</h2><div class="flex justify-center flex-wrap gap-2 mt-2"><span class="text-gray-500 font-mono text-xs bg-gray-50 px-2 py-0.5 rounded border">${g(c(M).admission_number)}</span>`),c(M).special_needs?(r('<span class="text-white font-bold text-xs bg-purple-600 px-2 py-0.5 rounded flex items-center gap-1">'),r(b(_,{name:"i-heroicons-sparkles",class:"w-3 h-3"},null,a)),r(" Special Needs </span>")):r("\x3c!----\x3e"),r(`</div><div class="mt-6 text-sm text-left space-y-3 bg-gray-50 p-4 rounded border border-gray-100"><div class="flex justify-between border-b border-gray-200 pb-2"><span class="text-gray-500 text-xs uppercase font-bold">Class</span><span class="font-medium text-[#09033B]">${g(c(M).class_level)}</span></div><div class="flex justify-between border-b border-gray-200 pb-2"><span class="text-gray-500 text-xs uppercase font-bold">DOB</span><span class="font-medium text-gray-900">${g(c(M).dob?new Date(c(M).dob).toLocaleDateString():"N/A")}</span></div><div class="flex justify-between"><span class="text-gray-500 text-xs uppercase font-bold">Gender</span><span class="font-medium text-gray-900">${g(c(M).gender)}</span></div></div><div class="mt-6 text-left"><h4 class="text-xs font-bold text-gray-400 uppercase tracking-wider mb-2 flex items-center gap-1">`),r(b(_,{name:"i-heroicons-user-group",class:"w-4 h-4"},null,a)),r(" Guardians </h4>"),c(M).parent1_name?(r(`<div class="bg-white border border-gray-200 p-2 rounded mb-2 shadow-sm"><p class="font-bold text-sm text-[#09033B]">${g(c(M).parent1_name)}</p><div class="flex justify-between items-center mt-1"><span class="text-xs text-gray-500 bg-gray-100 px-1.5 rounded">${g(c(M).parent1_rel||"Guardian")}</span>`),c(M).parent1_phone?(r(`<a${v("href",`tel:${c(M).parent1_phone}`)} class="text-blue-600 hover:underline text-xs font-bold flex items-center gap-1">`),r(b(_,{name:"i-heroicons-phone",class:"w-3 h-3"},null,a)),r(` ${g(c(M).parent1_phone)}</a>`)):r("\x3c!----\x3e"),r("</div></div>")):r("\x3c!----\x3e"),c(M).parent2_name?(r(`<div class="bg-white border border-gray-200 p-2 rounded shadow-sm"><p class="font-bold text-sm text-[#09033B]">${g(c(M).parent2_name)}</p><div class="flex justify-between items-center mt-1"><span class="text-xs text-gray-500 bg-gray-100 px-1.5 rounded">${g(c(M).parent2_rel||"Guardian")}</span>`),c(M).parent2_phone?(r(`<a${v("href",`tel:${c(M).parent2_phone}`)} class="text-blue-600 hover:underline text-xs font-bold flex items-center gap-1">`),r(b(_,{name:"i-heroicons-phone",class:"w-3 h-3"},null,a)),r(` ${g(c(M).parent2_phone)}</a>`)):r("\x3c!----\x3e"),r("</div></div>")):r("\x3c!----\x3e"),r("</div>"),c(M).allergies?(r('<div class="mt-4 text-left"><h4 class="text-xs font-bold text-red-400 uppercase tracking-wider mb-1 flex items-center gap-1">'),r(b(_,{name:"i-heroicons-exclamation-triangle",class:"w-4 h-4"},null,a)),r(` Medical / Allergies </h4><div class="bg-red-50 text-red-800 text-xs p-2 rounded border border-red-100 font-medium">${g(c(M).allergies)}</div></div>`)):r("\x3c!----\x3e"),r(`</div></div><div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6"><h3 class="text-sm font-bold text-gray-900 uppercase tracking-wider mb-4 pb-2 border-b">Management</h3><div class="mb-6"><label class="block text-xs font-medium text-gray-500 mb-2">Promote / Move Class</label><div class="flex gap-2"><select class="flex-1 text-sm border-gray-300 rounded focus:ring-[#09033B] focus:border-[#09033B]"><option value="" disabled${f(Array.isArray(c(R))?h(c(R),""):y(c(R),""))?" selected":""}>Select Class...</option>\x3c!--[--\x3e`),w(N,e=>{r(`<option${v("value",e)}${f(Array.isArray(c(R))?h(c(R),e):y(c(R),e))?" selected":""}>${g(e)}</option>`)}),r(`\x3c!--]--\x3e</select><button${f(!c(R)||c(D))?" disabled":""} class="bg-blue-600 text-white px-3 py-1.5 rounded text-sm font-bold hover:bg-blue-700 disabled:opacity-50 transition-colors"> Move </button></div></div><div><label class="block text-xs font-medium text-gray-500 mb-2">Danger Zone</label><button class="w-full border border-red-200 text-red-600 bg-red-50 hover:bg-red-100 py-2 rounded text-sm font-medium transition-colors flex items-center justify-center gap-2">`),r(b(_,{name:"i-heroicons-trash",class:"w-4 h-4"},null,a)),r(` Permanently Delete Student </button><p class="text-[10px] text-gray-400 mt-1 text-center">Removes all grades, attendance, and reports.</p></div></div></div><div class="lg:col-span-2"><div class="bg-white rounded-lg shadow-sm border border-gray-200 min-h-[400px]"><div class="px-6 py-4 border-b border-gray-200 flex justify-between items-center"><h3 class="font-bold text-gray-800">Academic History</h3><span class="text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded">${g(c(E).length)} Reports</span></div>`),0===c(E).length?(r('<div class="p-12 text-center text-gray-400">'),r(b(_,{name:"i-heroicons-document-magnifying-glass",class:"w-12 h-12 mx-auto mb-3 opacity-50"},null,a)),r('<h3 class="text-lg font-medium text-gray-900">No Records Found</h3><p class="mt-1">This student has no academic records yet.</p></div>')):(r('<div class="divide-y divide-gray-100">\x3c!--[--\x3e'),w(c(E),(e,t)=>{r(`<div class="p-4 hover:bg-gray-50 flex items-center justify-between transition-colors"><div class="flex items-center gap-4"><div class="bg-blue-50 text-blue-800 font-bold p-3 rounded-lg text-xs text-center min-w-[70px] border border-blue-100">${g(e.session)}</div><div><p class="font-bold text-gray-900 text-sm flex items-center gap-2">${g(e.term)} <span class="text-[10px] bg-green-100 text-green-700 px-1.5 py-0.5 rounded border border-green-200">Generated</span></p><p class="text-xs text-gray-500 mt-0.5">Class: ${g(e.class_level)}</p></div></div>`),r(b($,{to:`/report/${c(M).id}?session=${e.session}&term=${e.term}`,target:"_blank",class:"inline-flex items-center gap-1 text-blue-600 hover:text-blue-800 hover:bg-blue-50 px-3 py-1.5 rounded transition-colors text-sm font-bold"},{default:d((e,t,s,r)=>{if(!t)return[m(_,{name:"i-heroicons-eye",class:"w-4 h-4"}),i(" View Report ")];t(b(_,{name:"i-heroicons-eye",class:"w-4 h-4"},null,s,r)),t(" View Report ")}),_:2},a)),r("</div>")}),r("\x3c!--]--\x3e</div>")),r("</div></div></div>")):r("\x3c!----\x3e"),r("</div>")}}}),k=G.setup;G.setup=(e,t)=>{const s=x();return(s.modules||(s.modules=new Set)).add("pages/admin/students/[id].vue"),k?k(e,t):void 0};export{G as default};
//# sourceMappingURL=_id_-DEb9KVld.mjs.map
