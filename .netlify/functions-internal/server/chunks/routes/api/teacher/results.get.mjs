import{d as e,b as s,a as t,c as a}from"../../../_/nitro.mjs";import"@tidbcloud/serverless";import"node:crypto";import"node:http";import"node:https";import"node:events";import"node:buffer";import"@iconify/utils";import"consola";import"node:fs";import"node:path";const n=e(async e=>{var n;const{student_id:o,session:r,term:c}=s(e),i=t();if(!o||!r||!c)return{found:!1};try{const e="\n      SELECT subject, \n             ca1_score as ca1, \n             ca2_score as ca2, \n             assignment_score as assignment, \n             class_exercise_score as class_ex, \n             affective_score as affective, \n             psychomotor_score as psychomotor, \n             exam_score as exam\n      FROM academic_records \n      WHERE student_id = ? AND session = ? AND term = ?\n    ",s=await i.execute(e,[o,r,c]),t=Array.isArray(s)?s:s.rows||[],a="\n      SELECT class_teacher_comment, head_teacher_comment, \n             total_paces, pace_average, days_absent, next_term_begins, reading_comprehension\n      FROM term_reports \n      WHERE student_id = ? AND session = ? AND term = ?\n    ",m=await i.execute(a,[o,r,c]),d=Array.isArray(m)?m[0]:(null==(n=m.rows)?void 0:n[0])||null;return 0!==t.length||d?{found:!0,academics:t,comments:{teacher:(null==d?void 0:d.class_teacher_comment)||"",principal:(null==d?void 0:d.head_teacher_comment)||""},summary:{total_paces:(null==d?void 0:d.total_paces)||"",pace_average:(null==d?void 0:d.pace_average)||"",days_absent:(null==d?void 0:d.days_absent)||0,next_term_begins:(null==d?void 0:d.next_term_begins)||"",reading_comprehension:(null==d?void 0:d.reading_comprehension)||""}}:{found:!1}}catch(e){throw console.error("Fetch Results Error:",e),a({statusCode:500,message:e.message||"Failed to fetch results"})}});export{n as default};
//# sourceMappingURL=results.get.mjs.map
