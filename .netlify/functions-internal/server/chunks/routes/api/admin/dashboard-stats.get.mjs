import{d as e,a as s,c as t}from"../../../_/nitro.mjs";import"@tidbcloud/serverless";import"node:crypto";import"node:http";import"node:https";import"node:events";import"node:buffer";import"@iconify/utils";import"consola";import"node:fs";import"node:path";const a=e(async e=>{const a=s();try{const e="\n      SELECT \n        c.name as class_name,\n        u.full_name as teacher_name,\n        u.id as teacher_id,\n        (SELECT COUNT(*) FROM students s WHERE s.class_level = c.name) as student_count\n      FROM classes c\n      LEFT JOIN users u ON c.teacher_id = u.id\n      ORDER BY c.name\n    ",s="SELECT id, full_name, email FROM users WHERE role = 'teacher'",[t,o]=await Promise.all([a.execute(e),a.execute(s)]);return{classes:t.rows||t,teachers:o.rows||o}}catch(e){throw t({statusCode:500,message:e.message})}});export{a as default};
//# sourceMappingURL=dashboard-stats.get.mjs.map
