import{d as e,e as r,c as t,a as o}from"../../../_/nitro.mjs";import"@tidbcloud/serverless";import"node:crypto";import"node:http";import"node:https";import"node:events";import"node:buffer";import"@iconify/utils";import"consola";import"node:fs";import"node:path";const n=e(async e=>{if("admin"!==(await r(e)).user.role)throw t({statusCode:403,message:"Unauthorized"});const n=o();try{const e="\n      SELECT \n        u.id, \n        u.full_name, \n        u.email, \n        u.role, \n        u.created_at,\n        p.photo_url, \n        p.qualification, \n        p.phone, \n        p.address,\n        p.guarantor_name, \n        p.guarantor_phone, \n        p.guarantor_rel\n      FROM users u\n      LEFT JOIN profiles_teacher p ON u.id = p.user_id\n      WHERE u.role = 'teacher'\n      ORDER BY u.full_name ASC\n    ",r=await n.execute(e);return Array.isArray(r)?r:r.rows||[]}catch(e){throw console.error("Fetch Teachers Error:",e),t({statusCode:500,message:e.message||"Failed to fetch staff list"})}});export{n as default};
//# sourceMappingURL=teachers.get.mjs.map
